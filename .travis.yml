language: android
jdk:
- openjdk7
script:
- ./gradlew --daemon --stacktrace library:build
- 
- ./gradlew --daemon --stacktrace library:connectedCheck || (adb logcat -t 100 '*:E'
  && false)
env:
- TARGET=android-21 ABI=armeabi-v7a
android:
  components:
  - build-tools-21.1.1
  - android-21
  - extra-google-google_play_services
  - extra-google-m2repository
  - extra-android-m2repository
  - addon-google_apis-google-19
  - sys-img-armeabi-v7a-android-19
  - sys-img-x86-android-17
before_install:
- chmod +x gradlew
- export TERM=dumb
- android list targets
- echo no | android create avd --force -n test -t $TARGET -b $ABI
- emulator -avd test -no-skin -no-audio -no-window &
- ./gradlew --daemon --stacktrace library:tasks
- android-wait-for-emulator
after_script:
- android delete avd -n test
notifications:
  slack:
    secure: FONwDLu3nx2mw3VNSKRb4TbkErdNB+GQCSpCprRlIzNAdn+jBC0LDdpI6MUxwZObhwBhoArnaPtybfhe0qZq0rVav+mF4ypMuz2W5DKlOy2bXSoYcD6RilzGnZoWIuWqD8cMbCuptTAB54yTfgB29cExNaLhoQgcKaa1KEOapnc=
